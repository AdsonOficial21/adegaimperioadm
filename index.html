<html><head><base href=".">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1a237e">
<title>Painel Administrativo - Delivery</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-tap-highlight-color: transparent;
}

body {
    background: #f8f9fa;
    padding: 16px;
    min-height: 100vh;
}

.admin-panel {
    max-width: 100%;
    margin: 0 auto;
    position: relative;
}

.header {
    background: linear-gradient(135deg, #1a237e, #0d47a1);
    color: white;
    padding: 20px;
    border-radius: 16px;
    margin-bottom: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.header h1 {
    font-size: 24px;
    font-weight: 700;
    letter-spacing: -0.5px;
}

.nav-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
    position: relative;
}

.nav-row {
    display: flex;
    gap: 12px;
}

.nav-row:first-child {
    margin-bottom: 0;
}

.nav-btn {
    flex: 1;
    background: white;
    color: #1a237e;
    border: none;
    padding: 14px 20px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: all 0.2s ease;
    position: relative;
}

.nav-btn:active {
    transform: scale(0.98);
}

.order-count {
    position: absolute; 
    top: -8px;
    right: -8px; 
    background: #f44336;
    color: white;
    border-radius: 12px;
    min-width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: bold;
    padding: 0 8px;
    box-shadow: 0 2px 4px rgba(244,67,54,0.3);
}

.nav-btn.active {
    background: #1a237e;
    color: white;
}

.add-product-btn {
    background: linear-gradient(135deg, #00c853, #64dd17);
    color: white;
    border: none;
    padding: 16px 24px;
    border-radius: 12px;
    width: 100%;
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 24px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,200,83,0.2);
    transition: all 0.2s ease;
}

.add-product-btn:active {
    transform: scale(0.98);
}

.product-form {
    background: white;
    padding: 24px;
    border-radius: 16px;
    display: none;
    margin-bottom: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    overflow-y: auto;
    width: 100%;
    height: 100vh; 
    margin: 0;
    border-radius: 0;
}

.order-list, .categories-form {
    background: white;
    padding: 24px;
    border-radius: 16px;
    display: none;
    margin-bottom: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: #37474f;
    font-weight: 700;
    font-size: 15px;
}

.form-group input {
    width: 100%;
    padding: 14px;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-size: 16px;
    transition: border-color 0.2s ease;
}

.form-group select {
    width: 100%;
    padding: 14px;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-size: 16px;
    transition: border-color 0.2s ease;
    background: white;
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    cursor: pointer;
}

.form-group input:focus, .form-group select:focus {
    outline: none;
    border-color: #1a237e;
}

.submit-btn {
    background: linear-gradient(135deg, #1a237e, #0d47a1);
    color: white;
    border: none;
    padding: 14px 24px;
    border-radius: 12px;
    width: 100%;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(26,35,126,0.2);
    transition: all 0.2s ease;
}

.products-list, .categories-list, .hours-list {
    background: white;
    padding: 16px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.product-item, .order-item, .category-item, .hours-item {
    padding: 16px;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.product-item:last-child,
.order-item:last-child,
.category-item:last-child,
.hours-item:last-child {
    border-bottom: none;
}

.product-item img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 12px;
    margin-right: 16px;
}

.delete-btn {
    background: #ef5350;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
}

.order-details {
    margin-left: 12px;
    flex: 1;
}

.order-details strong {
    font-size: 16px;
    color: #37474f;
    margin-bottom: 4px;
    display: block;
    font-weight: 700;
}

.order-details p {
    color: #78909c;
    font-size: 14px;
    margin: 4px 0;
    line-height: 1.4;
    font-weight: 700;
}

.order-actions {
    display: flex;
    gap: 8px;
}

.accept-btn, .deliver-btn {
    background: #00c853;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
}

.back-btn {
    background: #ffa000;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
}

.cancel-btn {
    background: #ef5350;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
}

.edit-btn {
    background: #ffa000;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
    margin-right: 8px;
}

.product-actions {
    display: flex;
    gap: 8px;
}

.product-item strong {
    font-weight: 700;
}

.category-item strong {
    font-weight: 700;
}

.product-item p {
    font-weight: 700;
}

.finish-btn {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
}

.back-to-btn {
    background: #ffa000;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
    margin-left: 8px;
}

.search-container {
    margin-bottom: 24px;
}

.search-input {
    width: 100%;
    padding: 14px;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-size: 16px;
    transition: border-color 0.2s ease;
    margin-bottom: 16px;
}

.search-input:focus {
    outline: none;
    border-color: #1a237e;
}

.duplicate-btn {
    background: #9c27b0; 
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 14px;
    margin-right: 8px;
}

.hours-list {
  background: white;
  padding: 24px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.06);
  margin-bottom: 24px;
}

.hours-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid #f0f0f0;
  transition: all 0.2s ease;
}

.hours-item:hover {
  background: #f8f9fa;
}

.hours-item:last-child {
  border-bottom: none;
}

.hours-item .day-info {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.hours-item .day-info strong {
  font-size: 18px;
  color: #1a237e;
  font-weight: 700;
}

.hours-item .day-info p {
  font-size: 16px;
  color: #455a64;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
}

.hours-item .day-info p svg {
  width: 18px;
  height: 18px;
  color: #78909c;
}

.hours-form {
  background: white;
  padding: 32px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  margin-bottom: 24px;
}

.store-status {
  background: linear-gradient(135deg, #fff, #f8f9fa);
  padding: 24px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.06);
  margin-top: 24px;
  display: flex;
  align-items: center;
  gap: 24px;
}

.store-status h3 {
  font-size: 20px;
  color: #1a237e;
  font-weight: 700;
}

#storeStatusText {
  font-size: 16px;
  font-weight: 600;
}

.store-status input:checked + .slider {
  background: linear-gradient(135deg, #00c853, #64dd17);
}

.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ef5350;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
}

input:checked + .slider {
  background-color: #4CAF50;
}

input:checked + .slider:before {
  transform: translateX(26px);
}

.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

.edit-hours-btn {
  background: #ffa000;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  margin-right: 8px;
}

.hours-edit-form {
  background: white;
  padding: 32px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  margin-bottom: 24px;
  display: none;
}

@media (max-width: 480px) {
    body {
        padding: 12px;
    }
    
    .header {
        padding: 16px;
        border-radius: 12px;
    }
    
    .nav-btn, .add-product-btn {
        padding: 12px 16px;
    }
    
    .product-form, .order-list, .categories-form, .hours-form {
        padding: 16px;
    }
    
    .order-actions {
        flex-direction: column;
        gap: 8px;
    }
    
    .order-actions button {
        width: 100%;
    }
    
    .product-actions {
        flex-direction: column;
        gap: 8px;
    }
    
    .product-actions button {
        width: 100%;
    }
}
</style>
</head>
<body>

<div class="admin-panel">
    <div class="header">
        <h1>Painel Administrativo</h1>
    </div>

    <div class="nav-buttons">
        <div class="nav-row">
            <button class="nav-btn active" onclick="showSection(&apos;products&apos;)">Produtos</button>
            <button class="nav-btn" onclick="showSection(&apos;orders&apos;)" style="position: relative;">Pedidos<span id="orderCount" class="order-count" style="display: none;">0</span></button>
            <button class="nav-btn" onclick="showSection(&apos;categories&apos;)">+ Categoria</button>
        </div>
        <div class="nav-row">
            <button class="nav-btn" onclick="showSection(&apos;hours&apos;)">Hor&#xe1;rios</button>
        </div>
    </div>

    <div id="productsSection" class="section" style="display:block;">
        <button class="add-product-btn" onclick="toggleForm()">Adicionar Produto</button>

        <div class="search-container" style="margin-bottom: 24px;">
            <input type="text" id="productSearch" placeholder="Pesquisar produtos..." class="search-input">
        </div>

        <div class="product-form" id="productForm">
            <div class="form-group">
                <label for="productName">Nome do Produto</label>
                <input type="text" id="productName" required>
            </div>
            <div class="form-group">
                <label for="productCategory">Categoria</label>
                <select id="productCategory" required>
                    <option value>Selecione uma categoria</option>
                    <option value="bebidas">Bebidas</option>
                    <option value="destilados">Destilados</option>
                    <option value="cervejas">Cervejas</option>
                    <option value="vinhos">Vinhos</option>
                    <option value="outros">Outros</option>
                </select>
            </div>
            <div class="form-group">
                <label for="productPrice">Pre&#xe7;o</label>
                <input type="number" id="productPrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="productQuantity">Quantidade</label>
                <input type="number" id="productQuantity" required>
            </div>
            <div class="form-group">
                <label for="productImage">URL da Imagem</label>
                <input type="url" id="productImage" required>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="addProduct()">Salvar Produto</button>
                <button class="submit-btn" style="background: #e74c3c;" onclick="toggleForm()">Cancelar</button>
            </div>
        </div>

        <div class="product-form" id="editProductForm" style="display: none;">
            <div class="form-group">
                <label for="editProductName">Nome do Produto</label>
                <input type="text" id="editProductName" required>
            </div>
            <div class="form-group">
                <label for="editProductCategory">Categoria</label>
                <select id="editProductCategory" required>
                    <option value>Selecione uma categoria</option>
                    <option value="bebidas">Bebidas</option>
                    <option value="destilados">Destilados</option>
                    <option value="cervejas">Cervejas</option>
                    <option value="vinhos">Vinhos</option>
                    <option value="outros">Outros</option>
                </select>
            </div>
            <div class="form-group">
                <label for="editProductPrice">Pre&#xe7;o</label>
                <input type="number" id="editProductPrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="editProductQuantity">Quantidade</label>
                <input type="number" id="editProductQuantity" required>
            </div>
            <div class="form-group">
                <label for="editProductImage">URL da Imagem</label>
                <input type="url" id="editProductImage" required>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="updateProduct()">Atualizar Produto</button>
                <button class="submit-btn" style="background: #e74c3c;" onclick="cancelEdit()">Cancelar</button>
            </div>
        </div>

        <div class="products-list" id="productsList">
            <!-- Produtos serão inseridos aqui dinamicamente -->
        </div>
    </div>

    <div id="hoursSection" class="section" style="display:none;">
        <button class="add-product-btn" onclick="toggleHoursForm()">Adicionar Hor&#xe1;rio</button>

        <div class="hours-form" id="hoursForm" style="display: none;">
            <div class="form-group">
                <label for="dayOfWeek">Dia da Semana</label>
                <select id="dayOfWeek" required>
                    <option value>Selecione um dia</option>
                    <option value="Segunda">Segunda-feira</option>
                    <option value="Ter&#xe7;a">Ter&#xe7;a-feira</option>
                    <option value="Quarta">Quarta-feira</option>
                    <option value="Quinta">Quinta-feira</option>
                    <option value="Sexta">Sexta-feira</option>
                    <option value="S&#xe1;bado">S&#xe1;bado</option>
                    <option value="Domingo">Domingo</option>
                </select>
            </div>
            <div class="form-group">
                <label for="openTime">Hor&#xe1;rio de Abertura</label>
                <select id="openTime" required>
                    <option value>Selecione o hor&#xe1;rio</option>
                    <option value="00:00">00:00</option>
                    <option value="00:30">00:30</option>
                    <option value="01:00">01:00</option>
                    <option value="01:30">01:30</option>
                    <option value="02:00">02:00</option>
                    <option value="02:30">02:30</option>
                    <option value="03:00">03:00</option>
                    <option value="03:30">03:30</option>
                    <option value="04:00">04:00</option>
                    <option value="04:30">04:30</option>
                    <option value="05:00">05:00</option>
                    <option value="05:30">05:30</option>
                    <option value="06:00">06:00</option>
                    <option value="06:30">06:30</option>
                    <option value="07:00">07:00</option>
                    <option value="07:30">07:30</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                    <option value="19:30">19:30</option>
                    <option value="20:00">20:00</option>
                    <option value="20:30">20:30</option>
                    <option value="21:00">21:00</option>
                    <option value="21:30">21:30</option>
                    <option value="22:00">22:00</option>
                    <option value="22:30">22:30</option>
                    <option value="23:00">23:00</option>
                    <option value="23:30">23:30</option>
                </select>
            </div>
            <div class="form-group">
                <label for="closeTime">Hor&#xe1;rio de Fechamento</label>
                <select id="closeTime" required>
                    <option value>Selecione o hor&#xe1;rio</option>
                    <option value="00:00">00:00</option>
                    <option value="00:30">00:30</option>
                    <option value="01:00">01:00</option>
                    <option value="01:30">01:30</option>
                    <option value="02:00">02:00</option>
                    <option value="02:30">02:30</option>
                    <option value="03:00">03:00</option>
                    <option value="03:30">03:30</option>
                    <option value="04:00">04:00</option>
                    <option value="04:30">04:30</option>
                    <option value="05:00">05:00</option>
                    <option value="05:30">05:30</option>
                    <option value="06:00">06:00</option>
                    <option value="06:30">06:30</option>
                    <option value="07:00">07:00</option>
                    <option value="07:30">07:30</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                    <option value="19:30">19:30</option>
                    <option value="20:00">20:00</option>
                    <option value="20:30">20:30</option>
                    <option value="21:00">21:00</option>
                    <option value="21:30">21:30</option>
                    <option value="22:00">22:00</option>
                    <option value="22:30">22:30</option>
                    <option value="23:00">23:00</option>
                    <option value="23:30">23:30</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="addHours()">Salvar Hor&#xe1;rio</button>
                <button class="submit-btn" style="background: #e74c3c;" onclick="toggleHoursForm()">Cancelar</button>
            </div>
        </div>

        <div class="hours-edit-form" id="hoursEditForm" style="display: none;">
            <div class="form-group">
                <label for="editDayOfWeek">Dia da Semana</label>
                <select id="editDayOfWeek" required>
                    <option value>Selecione um dia</option>
                    <option value="Segunda">Segunda-feira</option>
                    <option value="Ter&#xe7;a">Ter&#xe7;a-feira</option>
                    <option value="Quarta">Quarta-feira</option>
                    <option value="Quinta">Quinta-feira</option>
                    <option value="Sexta">Sexta-feira</option>
                    <option value="S&#xe1;bado">S&#xe1;bado</option>
                    <option value="Domingo">Domingo</option>
                </select>
            </div>
            <div class="form-group">
                <label for="editOpenTime">Hor&#xe1;rio de Abertura</label>
                <select id="editOpenTime" required>
                    <option value>Selecione o hor&#xe1;rio</option>
                    <option value="00:00">00:00</option>
                    <option value="00:30">00:30</option>
                    <option value="01:00">01:00</option>
                    <option value="01:30">01:30</option>
                    <option value="02:00">02:00</option>
                    <option value="02:30">02:30</option>
                    <option value="03:00">03:00</option>
                    <option value="03:30">03:30</option>
                    <option value="04:00">04:00</option>
                    <option value="04:30">04:30</option>
                    <option value="05:00">05:00</option>
                    <option value="05:30">05:30</option>
                    <option value="06:00">06:00</option>
                    <option value="06:30">06:30</option>
                    <option value="07:00">07:00</option>
                    <option value="07:30">07:30</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                    <option value="19:30">19:30</option>
                    <option value="20:00">20:00</option>
                    <option value="20:30">20:30</option>
                    <option value="21:00">21:00</option>
                    <option value="21:30">21:30</option>
                    <option value="22:00">22:00</option>
                    <option value="22:30">22:30</option>
                    <option value="23:00">23:00</option>
                    <option value="23:30">23:30</option>
                </select>
            </div>
            <div class="form-group">
                <label for="editCloseTime">Hor&#xe1;rio de Fechamento</label>
                <select id="editCloseTime" required>
                    <option value>Selecione o hor&#xe1;rio</option>
                    <option value="00:00">00:00</option>
                    <option value="00:30">00:30</option>
                    <option value="01:00">01:00</option>
                    <option value="01:30">01:30</option>
                    <option value="02:00">02:00</option>
                    <option value="02:30">02:30</option>
                    <option value="03:00">03:00</option>
                    <option value="03:30">03:30</option>
                    <option value="04:00">04:00</option>
                    <option value="04:30">04:30</option>
                    <option value="05:00">05:00</option>
                    <option value="05:30">05:30</option>
                    <option value="06:00">06:00</option>
                    <option value="06:30">06:30</option>
                    <option value="07:00">07:00</option>
                    <option value="07:30">07:30</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                    <option value="19:30">19:30</option>
                    <option value="20:00">20:00</option>
                    <option value="20:30">20:30</option>
                    <option value="21:00">21:00</option>
                    <option value="21:30">21:30</option>
                    <option value="22:00">22:00</option>
                    <option value="22:30">22:30</option>
                    <option value="23:00">23:00</option>
                    <option value="23:30">23:30</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="updateHours()">Atualizar Hor&#xe1;rio</button>
                <button class="submit-btn" style="background: #e74c3c;" onclick="toggleHoursEditForm()">Cancelar</button>
            </div>
        </div>

        <div class="hours-list" id="hoursList">
            <!-- Hours will be inserted here dynamically -->
        </div>
        <div class="store-status">
          <h3>Status da Loja</h3>
          <label class="switch">
            <input type="checkbox" id="storeOpenToggle" onchange="toggleStoreStatus(event)">
            <span class="slider round"></span>
          </label>
          <span id="storeStatusText">Fechado</span>
        </div>
    </div>

    <div id="ordersSection" class="section" style="display:none;">
        <div class="order-list" id="ordersList">
            <!-- Pedidos serão inseridos aqui dinamicamente -->
        </div>
    </div>
    
    <div id="categoriesSection" class="section" style="display:none;">
        <button class="add-product-btn" onclick="toggleCategoryForm()">Adicionar Categoria</button>

        <div class="categories-form" id="categoryForm">
            <div class="form-group">
                <label for="categoryName">Nome da Categoria</label>
                <input type="text" id="categoryName" required>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="addCategory()">Salvar Categoria</button>
                <button class="submit-btn" style="background: #e74c3c;" onclick="toggleCategoryForm()">Cancelar</button>
            </div>
        </div>
        
        <div class="categories-form" id="editCategoryForm" style="display: none;">
            <div class="form-group">
                <label for="editCategoryName">Nome da Categoria</label>
                <input type="text" id="editCategoryName" required>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="updateCategory()">Atualizar Categoria</button>
                <button class="submit-btn" style="background: #e74c3c;" onclick="cancelCategoryEdit()">Cancelar</button>
            </div>
        </div>

        <div class="categories-list" id="categoriesList">
            <!-- Categories will be inserted here dynamically -->
        </div>
    </div>
</div>

<script type="module">import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
import { getDatabase, ref, push, onValue, remove, update, get } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
const firebaseConfig = {
  apiKey: "AIzaSyA5fUshfXl2Bh_UYH0YKCHecuv8HeraQRc",
  authDomain: "entrega-adega.firebaseapp.com",
  databaseURL: "https://entrega-adega-default-rtdb.firebaseio.com",
  projectId: "entrega-adega",
  storageBucket: "entrega-adega.firebasestorage.app",
  messagingSenderId: "561397387738",
  appId: "1:561397387738:web:a0b3662cc9bc24b3f530e3"
};
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const productsRef = ref(database, 'products');
const ordersRef = ref(database, 'orders');
const categoriesRef = ref(database, 'categories');
const hoursRef = ref(database, 'hours');
const storeStatusRef = ref(database, 'storeStatus');
let currentEditingKey = null;
let currentEditingCategoryKey = null;
let currentEditingHoursKey = null;
function removeAccents(str) {
  return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
}
window.showSection = function (section) {
  document.querySelectorAll('.section').forEach(s => {
    s.style.display = 'none';
  });
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById(section + 'Section').style.display = 'block';
  document.querySelector(`button[onclick="showSection('${section}')"]`).classList.add('active');
  if (section === 'hours') {
    document.getElementById('hoursForm').style.display = 'none';
  }
};
window.toggleForm = function () {
  const form = document.getElementById('productForm');
  document.body.style.overflow = form.style.display === 'none' ? 'hidden' : 'auto';
  if (form.style.display !== 'none') {
    document.getElementById('productName').value = '';
    document.getElementById('productPrice').value = '';
    document.getElementById('productQuantity').value = '';
    document.getElementById('productImage').value = '';
    document.getElementById('productCategory').value = '';
  }
  form.style.display = form.style.display === 'none' ? 'block' : 'none';
};
window.addProduct = function () {
  const name = document.getElementById('productName').value;
  const price = document.getElementById('productPrice').value;
  const quantity = document.getElementById('productQuantity').value;
  const image = document.getElementById('productImage').value;
  const category = document.getElementById('productCategory').value;
  if (name && price && quantity && image && category) {
    push(productsRef, {
      name: name,
      price: parseFloat(price),
      quantity: parseInt(quantity),
      image: image,
      category: category,
      timestamp: Date.now()
    });
    document.getElementById('productName').value = '';
    document.getElementById('productPrice').value = '';
    document.getElementById('productQuantity').value = '';
    document.getElementById('productImage').value = '';
    document.getElementById('productCategory').value = '';
    toggleForm();
  } else {
    alert('Por favor, preencha todos os campos!');
  }
};
window.toggleCategoryForm = function () {
  const form = document.getElementById('categoryForm');
  form.style.display = form.style.display === 'none' ? 'block' : 'none';
};
window.addCategory = function () {
  const name = document.getElementById('categoryName').value;
  if (name) {
    push(categoriesRef, {
      name: name
    });
    document.getElementById('categoryName').value = '';
    toggleCategoryForm();
  } else {
    alert('Por favor, preencha o nome da categoria!');
  }
};
window.deleteCategory = function (categoryKey) {
  if (confirm('Tem certeza que deseja excluir esta categoria?')) {
    const categoryRef = ref(database, `categories/${categoryKey}`);
    remove(categoryRef);
  }
};
window.toggleHoursForm = function () {
  const form = document.getElementById('hoursForm');
  form.style.display = form.style.display === 'none' ? 'block' : 'none';
  if (form.style.display === 'block') {
    document.getElementById('dayOfWeek').value = '';
    document.getElementById('openTime').value = '';
    document.getElementById('closeTime').value = '';
  }
};
window.addHours = function () {
  const day = document.getElementById('dayOfWeek').value;
  const open = document.getElementById('openTime').value;
  const close = document.getElementById('closeTime').value;
  if (day && open && close) {
    push(hoursRef, {
      day: day,
      openTime: open,
      closeTime: close
    });
    document.getElementById('dayOfWeek').value = '';
    document.getElementById('openTime').value = '';
    document.getElementById('closeTime').value = '';
    toggleHoursForm();
  } else {
    alert('Por favor, preencha todos os campos!');
  }
};
window.deleteHours = function (hoursKey) {
  if (confirm('Tem certeza que deseja excluir este horário?')) {
    const hoursRef = ref(database, `hours/${hoursKey}`);
    remove(hoursRef);
  }
};
window.editHours = function (hoursKey, hours) {
  currentEditingHoursKey = hoursKey;
  document.getElementById('editDayOfWeek').value = hours.day;
  document.getElementById('editOpenTime').value = hours.openTime;
  document.getElementById('editCloseTime').value = hours.closeTime;
  document.getElementById('hoursEditForm').style.display = 'block';
  document.getElementById('hoursEditForm').scrollIntoView({
    behavior: 'smooth'
  });
};
window.toggleHoursEditForm = function () {
  const form = document.getElementById('hoursEditForm');
  form.style.display = form.style.display === 'none' ? 'block' : 'none';
};
window.updateHours = function () {
  if (!currentEditingHoursKey) return;
  const day = document.getElementById('editDayOfWeek').value;
  const openTime = document.getElementById('editOpenTime').value;
  const closeTime = document.getElementById('editCloseTime').value;
  if (day && openTime && closeTime) {
    const hoursRef = ref(database, `hours/${currentEditingHoursKey}`);
    update(hoursRef, {
      day: day,
      openTime: openTime,
      closeTime: closeTime
    }).then(() => {
      document.getElementById('hoursEditForm').style.display = 'none';
      currentEditingHoursKey = null;
      document.getElementById('editDayOfWeek').value = '';
      document.getElementById('editOpenTime').value = '';
      document.getElementById('editCloseTime').value = '';
    }).catch(error => {
      console.error('Error updating hours:', error);
      alert('Error updating hours');
    });
  } else {
    alert('Please fill in all fields!');
  }
};
onValue(productsRef, snapshot => {
  const productsList = document.getElementById('productsList');
  const searchInput = document.getElementById('productSearch');
  productsList.innerHTML = '';
  const products = [];
  snapshot.forEach(childSnapshot => {
    products.push({
      key: childSnapshot.key,
      timestamp: childSnapshot.val().timestamp || 0,
      ...childSnapshot.val()
    });
  });
  products.sort((a, b) => b.timestamp - a.timestamp);
  function filterProducts(searchTerm) {
    const normalizedSearchTerm = removeAccents(searchTerm.toLowerCase());
    return products.filter(product => removeAccents(product.name.toLowerCase()).includes(normalizedSearchTerm) || removeAccents(product.category.toLowerCase()).includes(normalizedSearchTerm));
  }
  function renderProducts(productsToRender) {
    productsList.innerHTML = '';
    productsToRender.forEach(product => {
      const productElement = document.createElement('div');
      productElement.className = 'product-item';
      productElement.innerHTML = `
        <div style="display: flex; align-items: center;">
          <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/50'">
          <div>
            <strong>${product.name}</strong>
            <p>R$ ${product.price.toFixed(2)}</p>
            <p>Quantidade: ${product.quantity}</p>
            <p>Categoria: ${product.category || 'Não definida'}</p>
          </div>
        </div>
        <div class="product-actions">
          <button class="edit-btn" onclick='editProduct("${product.key}", ${JSON.stringify(product)})'>Editar</button>
          <button class="duplicate-btn" onclick='duplicateProduct(${JSON.stringify(product)})'>Duplicar</button>
          <button class="delete-btn" onclick="deleteProduct('${product.key}')">Excluir</button>
        </div>
      `;
      productsList.appendChild(productElement);
    });
  }
  renderProducts(products);
  searchInput.addEventListener('input', e => {
    const searchTerm = e.target.value;
    const filteredProducts = filterProducts(searchTerm);
    renderProducts(filteredProducts);
  });
});
onValue(ordersRef, snapshot => {
  const ordersList = document.getElementById('ordersList');
  ordersList.innerHTML = '';
  ordersList.style.display = 'block';
  let pendingOrders = 0;
  const orders = [];
  snapshot.forEach(childSnapshot => {
    orders.push({
      key: childSnapshot.key,
      ...childSnapshot.val()
    });
  });
  orders.sort((a, b) => {
    if (a.status === 'finished' && b.status === 'finished') return 0;
    if (a.status === 'finished') return 1;
    if (b.status === 'finished') return -1;
    if (!a.status || a.status === 'pending' || a.status === 'accepted' || a.status === 'delivering' || a.status === 'cancelled') {
      if (!b.status || b.status === 'pending' || b.status === 'accepted' || b.status === 'delivering' || b.status === 'cancelled') {
        return 0;
      }
      return -1;
    }
    if (!b.status || b.status === 'pending' || b.status === 'accepted' || b.status === 'delivering' || b.status === 'cancelled') {
      return 1;
    }
    return (b.finishedAt || 0) - (a.finishedAt || 0);
  });
  orders.forEach(order => {
    if (order.status === 'finished' || order.status === 'cancelled') {
      return;
    }
    const orderKey = order.key;
    if (!order.status || order.status === 'pending') {
      pendingOrders++;
    }
    const orderElement = document.createElement('div');
    orderElement.className = 'order-item';
    let actionButtons = '';
    if (order.status === 'accepted') {
      actionButtons = `<button class="deliver-btn" onclick="deliverOrder('${orderKey}')">Entregar!</button>
       <button class="back-btn" onclick="backToInitial('${orderKey}')">Voltar</button>`;
    } else if (order.status === 'delivering') {
      actionButtons = `
        <button class="finish-btn" onclick="finishOrder('${orderKey}')">Finalizar Pedido?</button>
        <button class="back-to-btn" onclick="backToDelivering('${orderKey}')">Voltar</button>
      `;
    } else {
      actionButtons = `<button class="accept-btn" onclick="acceptOrder('${orderKey}')">Aceitar</button>
         <button class="cancel-btn" onclick="cancelOrder('${orderKey}')">Cancelar</button>`;
    }
    orderElement.innerHTML = `
            <div class="order-details">
                <strong>${order.name}</strong>
                <p>Telefone: ${order.phone}</p>
                <p>Endereço: ${order.street}, ${order.number}</p>
                <p>Bairro: ${order.neighborhood}</p>
                <p>Forma de Pagamento: ${(order.payment || 'Não informado').charAt(0).toUpperCase() + (order.payment || 'Não informado').slice(1)}</p>
                <p>Troco: ${order.changeAmount ? `R$ ${typeof order.changeAmount === 'number' && order.changeAmount % 1 === 0 ? order.changeAmount.toFixed(0) : order.changeAmount.toFixed(2)}` : 'Não necessário'}</p>
                <p>Observação: ${order.observation || 'Nenhuma observação'}</p>
                <p>Produtos: ${order.items.map(item => `(${item.quantity}) ${item.name}`).join(", ")}</p>
                <p>Valor Total: R$ ${order.total}</p>
            </div>
            <div class="order-actions">
                ${actionButtons}
            </div>
        `;
    ordersList.appendChild(orderElement);
  });
  const orderCountElement = document.getElementById('orderCount');
  if (pendingOrders > 0) {
    orderCountElement.style.display = 'flex';
    orderCountElement.textContent = pendingOrders;
  } else {
    orderCountElement.style.display = 'none';
  }
});
onValue(categoriesRef, snapshot => {
  const categoriesList = document.getElementById('categoriesList');
  categoriesList.innerHTML = '';
  const categorySelect = document.getElementById('productCategory');
  const editCategorySelect = document.getElementById('editProductCategory');
  categorySelect.innerHTML = '<option value="">Selecione uma categoria</option>';
  editCategorySelect.innerHTML = '<option value="">Selecione uma categoria</option>';
  const categories = [];
  snapshot.forEach(childSnapshot => {
    categories.push({
      key: childSnapshot.key,
      ...childSnapshot.val()
    });
  });
  categories.sort((a, b) => a.name.localeCompare(b.name));
  categories.forEach(category => {
    const categoryElement = document.createElement('div');
    categoryElement.className = 'category-item';
    categoryElement.innerHTML = `
        <div>
            <strong>${category.name}</strong>
        </div>
        <div class="product-actions">
            <button class="edit-btn" onclick='editCategory("${category.key}", ${JSON.stringify(category)})'>Editar</button>
            <button class="delete-btn" onclick="deleteCategory('${category.key}')">Excluir</button>
        </div>
    `;
    categoriesList.appendChild(categoryElement);
    const option = document.createElement('option');
    option.value = category.name;
    option.textContent = category.name;
    categorySelect.appendChild(option.cloneNode(true));
    editCategorySelect.appendChild(option);
  });
});
onValue(hoursRef, snapshot => {
  const hoursList = document.getElementById('hoursList');
  hoursList.innerHTML = '';
  const hours = [];
  snapshot.forEach(childSnapshot => {
    hours.push({
      key: childSnapshot.key,
      ...childSnapshot.val()
    });
  });
  const weekdayOrder = {
    'Segunda': 1,
    'Terça': 2,
    'Quarta': 3,
    'Quinta': 4,
    'Sexta': 5,
    'Sábado': 6,
    'Domingo': 7
  };
  hours.sort((a, b) => weekdayOrder[a.day] - weekdayOrder[b.day]);
  hours.forEach(hour => {
    const hourElement = document.createElement('div');
    hourElement.className = 'hours-item';
    hourElement.innerHTML = `
      <div class="day-info">
        <strong>${hour.day}-feira</strong>
        <p>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          ${hour.openTime} - ${hour.closeTime}
        </p>
      </div>
      <div class="product-actions">
        <button class="edit-hours-btn" onclick='editHours("${hour.key}", ${JSON.stringify(hour)})'>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
          </svg>
          Editar
        </button>
        <button class="delete-btn" onclick="deleteHours('${hour.key}')">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
          </svg>
          Excluir
        </button>
      </div>
    `;
    hoursList.appendChild(hourElement);
  });
});
window.deleteProduct = function (productKey) {
  if (confirm('Tem certeza que deseja excluir este produto?')) {
    const productRef = ref(database, `products/${productKey}`);
    remove(productRef);
  }
};
window.acceptOrder = function (orderKey) {
  if (confirm('Deseja aceitar este pedido?')) {
    const orderRef = ref(database, `orders/${orderKey}`);
    update(orderRef, {
      status: 'accepted'
    }).then(() => {
      alert('Pedido aceito com sucesso!');
    }).catch(error => {
      console.error('Erro ao aceitar pedido:', error);
      alert('Erro ao aceitar pedido');
    });
  }
};
window.cancelOrder = function (orderKey) {
  if (confirm('Deseja cancelar este pedido?')) {
    const orderRef = ref(database, `orders/${orderKey}`);
    get(orderRef).then(snapshot => {
      const order = snapshot.val();
      if (order && order.items) {
        order.items.forEach(item => {
          const productRef = ref(database, `products/${item.id}`);
          get(productRef).then(prodSnapshot => {
            const product = prodSnapshot.val();
            if (product) {
              update(productRef, {
                quantity: product.quantity + item.quantity
              });
            }
          });
        });
      }
      update(orderRef, {
        status: 'cancelled',
        statusMessage: 'Pedido Cancelado Pelo Estabelecimento',
        cancelledAt: Date.now()
      }).then(() => {
        alert('Pedido cancelado com sucesso!');
      }).catch(error => {
        console.error('Erro ao cancelar pedido:', error);
        alert('Erro ao cancelar pedido');
      });
    });
  }
};
window.backToInitial = function (orderKey) {
  if (confirm('Deseja voltar o pedido para o estado inicial?')) {
    const orderRef = ref(database, `orders/${orderKey}`);
    update(orderRef, {
      status: 'pending'
    }).then(() => {
      alert('Pedido retornado ao estado inicial!');
    }).catch(error => {
      console.error('Erro ao retornar pedido:', error);
      alert('Erro ao retornar pedido');
    });
  }
};
window.editProduct = function (productKey, product) {
  currentEditingKey = productKey;
  document.getElementById('editProductName').value = product.name;
  document.getElementById('editProductPrice').value = product.price;
  document.getElementById('editProductQuantity').value = product.quantity;
  document.getElementById('editProductImage').value = product.image;
  document.getElementById('editProductCategory').value = product.category || '';
  document.getElementById('editProductForm').style.display = 'block';
  document.getElementById('productForm').style.display = 'none';
};
window.updateProduct = function () {
  if (!currentEditingKey) return;
  const name = document.getElementById('editProductName').value;
  const price = document.getElementById('editProductPrice').value;
  const quantity = document.getElementById('editProductQuantity').value;
  const image = document.getElementById('editProductImage').value;
  const category = document.getElementById('editProductCategory').value;
  if (name && price && quantity && image && category) {
    const productRef = ref(database, `products/${currentEditingKey}`);
    update(productRef, {
      name: name,
      price: parseFloat(price),
      quantity: parseInt(quantity),
      image: image,
      category: category
    }).then(() => {
      document.getElementById('editProductForm').style.display = 'none';
      currentEditingKey = null;
    }).catch(error => {
      console.error('Erro ao atualizar produto:', error);
      alert('Erro ao atualizar produto');
    });
  } else {
    alert('Por favor, preencha todos os campos!');
  }
};
window.cancelEdit = function () {
  document.getElementById('editProductForm').style.display = 'none';
  currentEditingKey = null;
};
window.editCategory = function (categoryKey, category) {
  currentEditingCategoryKey = categoryKey;
  const editNameInput = document.getElementById('editCategoryName');
  editNameInput.value = category.name;
  editNameInput.defaultValue = category.name;
  document.getElementById('editCategoryForm').style.display = 'block';
  document.getElementById('categoryForm').style.display = 'none';
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
};
window.updateCategory = function () {
  if (!currentEditingCategoryKey) return;
  const oldName = document.getElementById('editCategoryName').defaultValue;
  const newName = document.getElementById('editCategoryName').value;
  if (newName) {
    const categoryRef = ref(database, `categories/${currentEditingCategoryKey}`);
    update(categoryRef, {
      name: newName
    }).then(() => {
      const productsRef = ref(database, 'products');
      onValue(productsRef, snapshot => {
        snapshot.forEach(childSnapshot => {
          const product = childSnapshot.val();
          if (product.category === oldName) {
            const productRef = ref(database, `products/${childSnapshot.key}`);
            update(productRef, {
              category: newName
            });
          }
        });
      }, {
        onlyOnce: true
      });
      document.getElementById('editCategoryForm').style.display = 'none';
      currentEditingCategoryKey = null;
    });
  } else {
    alert('Por favor, preencha o nome da categoria!');
  }
};
window.cancelCategoryEdit = function () {
  document.getElementById('editCategoryForm').style.display = 'none';
  currentEditingCategoryKey = null;
};
window.deliverOrder = function (orderKey) {
  if (confirm('Confirmar entrega do pedido?')) {
    const orderRef = ref(database, `orders/${orderKey}`);
    update(orderRef, {
      status: 'delivering',
      statusMessage: 'Seu Pedido Saiu Para Entrega'
    }).then(() => {
      alert('Status atualizado: Pedido saiu para entrega!');
    }).catch(error => {
      console.error('Erro ao atualizar status:', error);
      alert('Erro ao atualizar status de entrega');
    });
  }
};
window.finishOrder = function (orderKey) {
  if (confirm('Confirmar finalização do pedido?')) {
    const orderRef = ref(database, `orders/${orderKey}`);
    update(orderRef, {
      status: 'finished',
      finishedAt: Date.now()
    }).then(() => {
      alert('Pedido finalizado com sucesso!');
    }).catch(error => {
      console.error('Erro ao finalizar pedido:', error);
      alert('Erro ao finalizar pedido');
    });
  }
};
window.backToDelivering = function (orderKey) {
  if (confirm('Deseja voltar o pedido para o status anterior?')) {
    const orderRef = ref(database, `orders/${orderKey}`);
    update(orderRef, {
      status: 'accepted',
      statusMessage: 'Pedido Aceito'
    }).then(() => {
      alert('Status do pedido atualizado com sucesso!');
    }).catch(error => {
      console.error('Erro ao atualizar status:', error);
      alert('Erro ao atualizar status do pedido');
    });
  }
};
window.duplicateProduct = function (product) {
  const duplicatedProduct = {
    name: product.name + ' (cópia)',
    price: product.price,
    quantity: product.quantity,
    image: product.image,
    category: product.category,
    timestamp: Date.now()
  };
  push(productsRef, duplicatedProduct);
};
window.toggleStoreStatus = function (event) {
  const isOpen = event.target.checked;
  update(storeStatusRef, {
    isOpen: isOpen,
    lastUpdated: Date.now()
  }).then(() => {
    document.getElementById('storeStatusText').textContent = isOpen ? 'Aberto' : 'Fechado';
  }).catch(error => {
    console.error('Erro ao atualizar status da loja:', error);
    event.target.checked = !isOpen;
  });
};
onValue(storeStatusRef, snapshot => {
  const status = snapshot.val() || {
    isOpen: false
  };
  const toggle = document.getElementById('storeOpenToggle');
  const statusText = document.getElementById('storeStatusText');
  toggle.checked = status.isOpen;
  statusText.innerHTML = status.isOpen ? `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#4CAF50" viewBox="0 0 16 16">
      <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
    </svg> Aberto` : `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ef5350" viewBox="0 0 16 16">
      <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
    </svg> Fechado`;
  if (!toggle.hasEventListener) {
    toggle.hasEventListener = true;
  }
});
const defaultHours = [{
  day: 'Segunda',
  openTime: '09:00',
  closeTime: '18:00'
}, {
  day: 'Terça',
  openTime: '09:00',
  closeTime: '18:00'
}, {
  day: 'Quarta',
  openTime: '09:00',
  closeTime: '18:00'
}, {
  day: 'Quinta',
  openTime: '09:00',
  closeTime: '18:00'
}, {
  day: 'Sexta',
  openTime: '09:00',
  closeTime: '18:00'
}, {
  day: 'Sábado',
  openTime: '09:00',
  closeTime: '18:00'
}, {
  day: 'Domingo',
  openTime: '09:00',
  closeTime: '18:00'
}];
get(hoursRef).then(snapshot => {
  if (!snapshot.exists()) {
    defaultHours.forEach(hour => {
      push(hoursRef, hour);
    });
  }
});
document.getElementById('productsSection').style.display = 'block';
document.getElementById('hoursSection').style.display = 'none';
document.getElementById('ordersSection').style.display = 'none';
document.getElementById('categoriesSection').style.display = 'none';</script>

</body></html>